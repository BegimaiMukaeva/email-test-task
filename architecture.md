# Outreach Email System Architecture (1200 email accounts)

## 1. Общее описание архитектуры

Система предназначена для обслуживания около 1200 email-аккаунтов для аутрич-кампаний нескольких клиентов и направлений. Основные требования — минимальная стоимость инфраструктуры, масштабируемость и высокая отказоустойчивость.

Архитектура построена по модульному принципу с разделением клиентов, доменов и отправляющих аккаунтов.

---

## 2. Используемые сервисы и подходы

- Email-провайдеры: Google Workspace, Outlook, Zoho
- SMTP / IMAP для отправки и приёма писем
- Отдельные домены под клиентов и направления
- DNS-настройки: SPF, DKIM, DMARC
- Очередь задач (Redis / встроенный scheduler)
- n8n или кастомный Python worker для оркестрации
- VPS (self-hosted решение)

---

## 3. Ротация и мониторинг

- Лимит отправки: 20–40 писем в сутки на аккаунт
- Warm-up новых доменов и аккаунтов
- Round-robin ротация email-аккаунтов
- Мониторинг bounce rate и spam complaints
- Автоматическое отключение аккаунта при превышении порогов
- Health-check SMTP соединений

---

## 4. Распределение нагрузки

- Пулы email-аккаунтов по клиентам
- Изоляция направлений (разные домены и sender pools)
- Очередь задач равномерно распределяет отправку
- Асинхронная обработка отправки и ответов
- Возможность горизонтального масштабирования

---

## 5. Риски и способы их закрытия

| Риск | Решение |
|----|----|
| Блокировка аккаунтов | Лимиты + ротация |
| Попадание в спам | SPF / DKIM / DMARC + warm-up |
| Потеря данных | Регулярные бэкапы |
| Отказ SMTP | Резервные аккаунты и провайдеры |
| Перегрузка системы | Очереди и rate limiting |

---

## 6. Примерная стоимость

- VPS (1–2 сервера): $10–30 / месяц
- Email-аккаунты: $2–6 × 1200
- n8n (self-hosted): $0
- DNS и домены: минимальные затраты

Архитектура позволяет дешево масштабироваться и поддерживать стабильную доставляемость.
